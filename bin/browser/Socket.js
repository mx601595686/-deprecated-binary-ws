"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _Buffer = require('buffer/').Buffer;
const toArraybuffer = require('to-arraybuffer');
const blobToBuffer = require('blob-to-buffer');
const isTypedBuffer = require('is-typedarray');
const isBlob = (x) => {
    return x instanceof Blob || Object.prototype.toString.call(x) === '[object Blob]';
};
const isArrayBuffer = (x) => {
    return x instanceof ArrayBuffer || Object.prototype.toString.call(x) === '[object ArrayBuffer]';
};
const isDataView = (x) => {
    return x instanceof DataView || Object.prototype.toString.call(x) === '[object DataView]';
};
const BaseSocket_1 = require("../common/BaseSocket");
class Socket extends BaseSocket_1.BaseSocket {
    constructor(args) {
        const cf = {
            url: `ws${location.protocol === 'https:' ? 's' : ''}://${location.host}`
        };
        if (typeof args === 'string') {
            cf.url = args;
        }
        else if (typeof args === 'object') {
            Object.assign(cf, args);
        }
        if (!(cf.socket instanceof WebSocket))
            cf.socket = new WebSocket(cf.url);
        (cf.socket).binaryType = 'arraybuffer';
        (cf.socket).onopen = () => this.emit('open');
        (cf.socket).onclose = (ev) => this.emit('close', ev.code, ev.reason);
        (cf.socket).onerror = (err) => { console.error(err), this.emit('error', new Error('连接错误')); };
        (cf.socket).onmessage = (e) => this._receiveData(_Buffer.from(e.data));
        super('browser', cf);
    }
    /**
     * 浏览器版除了可以直接发送Buffer之外还可以直接发送ArrayBuffer、TypedBuffer、DataView、Blob
     */
    send(messageName, data, needACK = true) {
        if (Array.isArray(data)) {
            data = data.map(item => this._transformType(item));
        }
        else {
            data = this._transformType(data);
        }
        return super.send(messageName, data, needACK);
    }
    // 转换成满足发送要求的类型
    _transformType(data) {
        if (isBlob(data)) {
            return blobToBuffer(data);
        }
        else if (isArrayBuffer(data) || isTypedBuffer(data)) {
            return _Buffer.from(data);
        }
        else if (isDataView(data)) {
            return _Buffer.from(data.buffer);
        }
        else {
            return data;
        }
    }
    _sendData(data) {
        return new Promise((resolve, reject) => {
            this.socket.send(toArraybuffer(data)); //不可以直接发送buffer
            const check = (interval) => {
                setTimeout(() => {
                    if (this.socket.bufferedAmount === 0) {
                        resolve();
                    }
                    else {
                        check(interval >= 2000 ? 2000 : interval * 2); //最慢2秒检查一次
                    }
                }, interval);
            };
            check(1);
        });
    }
    close() {
        this.socket.close();
    }
}
exports.Socket = Socket;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDO0lBQ0wsQ0FBQztJQUVTLFNBQVMsQ0FBQyxJQUFZO1FBQzVCLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNO1lBQy9CLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUUsZUFBZTtZQUV2RCxNQUFNLEtBQUssR0FBRyxDQUFDLFFBQWdCO2dCQUMzQixVQUFVLENBQUM7b0JBQ1AsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDbkMsT0FBTyxFQUFFLENBQUM7b0JBQ2QsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDSixLQUFLLENBQUMsUUFBUSxJQUFJLElBQUksR0FBRyxJQUFJLEdBQUcsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVTtvQkFDN0QsQ0FBQztnQkFDTCxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDakIsQ0FBQyxDQUFBO1lBRUQsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsS0FBSztRQUNELElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDeEIsQ0FBQztDQUNKO0FBbEZELHdCQWtGQyIsImZpbGUiOiJicm93c2VyL1NvY2tldC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF9CdWZmZXI6IHR5cGVvZiBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXIvJykuQnVmZmVyO1xyXG5jb25zdCB0b0FycmF5YnVmZmVyID0gcmVxdWlyZSgndG8tYXJyYXlidWZmZXInKTtcclxuY29uc3QgYmxvYlRvQnVmZmVyID0gcmVxdWlyZSgnYmxvYi10by1idWZmZXInKTtcclxuXHJcbmNvbnN0IGlzVHlwZWRCdWZmZXIgPSByZXF1aXJlKCdpcy10eXBlZGFycmF5Jyk7XHJcbmNvbnN0IGlzQmxvYiA9ICh4OiBhbnkpID0+IHtcclxuICAgIHJldHVybiB4IGluc3RhbmNlb2YgQmxvYiB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEJsb2JdJztcclxufVxyXG5jb25zdCBpc0FycmF5QnVmZmVyID0gKHg6IGFueSkgPT4ge1xyXG4gICAgcmV0dXJuIHggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XHJcbn1cclxuY29uc3QgaXNEYXRhVmlldyA9ICh4OiBhbnkpID0+IHtcclxuICAgIHJldHVybiB4IGluc3RhbmNlb2YgRGF0YVZpZXcgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBEYXRhVmlld10nO1xyXG59XHJcblxyXG5pbXBvcnQgeyBCYXNlU29ja2V0Q29uZmlnIH0gZnJvbSAnLi8uLi9jb21tb24vQmFzZVNvY2tldENvbmZpZyc7XHJcbmltcG9ydCB7IEJhc2VTb2NrZXQgfSBmcm9tIFwiLi4vY29tbW9uL0Jhc2VTb2NrZXRcIjtcclxuaW1wb3J0IHsgUmVhZHlTdGF0ZSB9IGZyb20gXCIuLi9jb21tb24vUmVhZHlTdGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNvY2tldCBleHRlbmRzIEJhc2VTb2NrZXQge1xyXG5cclxuICAgIHJlYWRvbmx5IHNvY2tldDogV2ViU29ja2V0O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFt1cmxdIOacjeWKoeWZqOWcsOWdgO+8jOWmguaenOS4jeaMh+Wumu+8jOm7mOiupOi/nuaOpeeahOaYr+W9k+WJjeWfn+WQjeS4i+eahOaguVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih1cmw/OiBzdHJpbmcpXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSAge0Jhc2VTb2NrZXRDb25maWd9IFtjb25maWdzXSDnq6/lj6PnmoTphY3nva5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlncz86IEJhc2VTb2NrZXRDb25maWcpXHJcbiAgICBjb25zdHJ1Y3RvcihhcmdzPzogYW55KSB7XHJcbiAgICAgICAgY29uc3QgY2Y6IEJhc2VTb2NrZXRDb25maWcgPSB7XHJcbiAgICAgICAgICAgIHVybDogYHdzJHtsb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgPyAncycgOiAnJ306Ly8ke2xvY2F0aW9uLmhvc3R9YFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjZi51cmwgPSBhcmdzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3MgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY2YsIGFyZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEoY2Yuc29ja2V0IGluc3RhbmNlb2YgV2ViU29ja2V0KSlcclxuICAgICAgICAgICAgY2Yuc29ja2V0ID0gbmV3IFdlYlNvY2tldChjZi51cmwpO1xyXG5cclxuICAgICAgICAoPFdlYlNvY2tldD4oY2Yuc29ja2V0KSkuYmluYXJ5VHlwZSA9ICdhcnJheWJ1ZmZlcic7XHJcbiAgICAgICAgKDxXZWJTb2NrZXQ+KGNmLnNvY2tldCkpLm9ub3BlbiA9ICgpID0+IHRoaXMuZW1pdCgnb3BlbicpO1xyXG4gICAgICAgICg8V2ViU29ja2V0PihjZi5zb2NrZXQpKS5vbmNsb3NlID0gKGV2KSA9PiB0aGlzLmVtaXQoJ2Nsb3NlJywgZXYuY29kZSwgZXYucmVhc29uKTtcclxuICAgICAgICAoPFdlYlNvY2tldD4oY2Yuc29ja2V0KSkub25lcnJvciA9IChlcnIpID0+IHsgY29uc29sZS5lcnJvcihlcnIpLCB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCfov57mjqXplJnor68nKSk7IH1cclxuICAgICAgICAoPFdlYlNvY2tldD4oY2Yuc29ja2V0KSkub25tZXNzYWdlID0gKGUpID0+IHRoaXMuX3JlY2VpdmVEYXRhKF9CdWZmZXIuZnJvbShlLmRhdGEpKTtcclxuXHJcbiAgICAgICAgc3VwZXIoJ2Jyb3dzZXInLCBjZik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmtY/op4jlmajniYjpmaTkuoblj6/ku6Xnm7TmjqXlj5HpgIFCdWZmZXLkuYvlpJbov5jlj6/ku6Xnm7TmjqXlj5HpgIFBcnJheUJ1ZmZlcuOAgVR5cGVkQnVmZmVy44CBRGF0YVZpZXfjgIFCbG9iXHJcbiAgICAgKi9cclxuICAgIHNlbmQobWVzc2FnZU5hbWU6IHN0cmluZywgZGF0YT86IGFueVtdIHwgYW55LCBuZWVkQUNLOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhLm1hcChpdGVtID0+IHRoaXMuX3RyYW5zZm9ybVR5cGUoaXRlbSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLl90cmFuc2Zvcm1UeXBlKGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyLnNlbmQobWVzc2FnZU5hbWUsIGRhdGEsIG5lZWRBQ0spO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOi9rOaNouaIkOa7oei2s+WPkemAgeimgeaxgueahOexu+Wei1xyXG4gICAgcHJpdmF0ZSBfdHJhbnNmb3JtVHlwZShkYXRhOiBhbnkpOiBCdWZmZXIge1xyXG4gICAgICAgIGlmIChpc0Jsb2IoZGF0YSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGJsb2JUb0J1ZmZlcihkYXRhKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXlCdWZmZXIoZGF0YSkgfHwgaXNUeXBlZEJ1ZmZlcihkYXRhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX0J1ZmZlci5mcm9tKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNEYXRhVmlldyhkYXRhKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX0J1ZmZlci5mcm9tKCg8RGF0YVZpZXc+ZGF0YSkuYnVmZmVyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9zZW5kRGF0YShkYXRhOiBCdWZmZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNvY2tldC5zZW5kKHRvQXJyYXlidWZmZXIoZGF0YSkpOyAgLy/kuI3lj6/ku6Xnm7TmjqXlj5HpgIFidWZmZXJcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrID0gKGludGVydmFsOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvY2tldC5idWZmZXJlZEFtb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2soaW50ZXJ2YWwgPj0gMjAwMCA/IDIwMDAgOiBpbnRlcnZhbCAqIDIpOyAvL+acgOaFojLnp5Lmo4Dmn6XkuIDmrKFcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNoZWNrKDEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7XHJcbiAgICB9XHJcbn1cclxuIl19
